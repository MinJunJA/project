## trans_data

본 폴더는 음성 데이터의 특징이 잘 드러날 수 있도록 전처리하는 내용을 담고 있다.

trans_data.ipynb와 같이 ipynb 파일은 전처리 과정에 대하여 단계적으로 명시하며 설명하며

py 파일은 sampling rate 통일, 노이즈 제거와 같이 음성 데이터를 직간접적으로 변형하는 함수들을 제공한다.

각각의 파일에 대한 설명은 아래와 같다.

<br>

### trans_data_preview.ipynb

아기울음 소리는 '언어'를 통해 소통하지 않으나 원하는 바에 따라 각 울음소리의 성조, 진폭, 등의 특징적인 차이가 있을 것이며 이에 따른 패턴의 차이가 존재할 것이라고 가설을 설정하였다.

가설을 검증한 뒤 각 상태(hungry, sad, ...etc)에 따른 특징점을 찾아내기 위해 데이터를 전처리하는 과정을 소규모의 데이터셋에 대해 시각적으로 보여준다.

아래 순서로 데이터 전처리가 진행된다.

1. 사용할 수 없는 데이터는 제외한 다음 상위 7개의 state를 가지는 음성만을 가져온다.

2. sample rate를 16000으로 통일한다.

3. 로그 멜 스펙트럼을 통해 음성의 파워를 측정한다.

4. 파워의 지역 최솟값을 기준으로 음성을 분할한다.

5. 분할된 음성의 앞뒤 화이트 노이즈(특정 임계값 이하의 에너지를 가지는 시점)을 제거한다.

6. 분할된 음성이 노이즈를 제거하여 패턴을 보다 잘 드러나게 한다.

7. 음성 정규화를 수행한다.

8. Padding과 Trimming을 통해 평균 세그멘테이션 길이를 가지도록 음성의 길이를 통일한다.

9. 음성의 유사도를 측정하여 하위 10%의 데이터는 제외한다.

10. 유사도 상위 10% 데이터에 대하여 SpecAugment를 적용하여 Training 데이터에 대해 마스킹 작업을 수행한다. 각 파일 당 마스킹 파일 1개를 생성한다.

> 모든 origin_data에 대해 데이터 전처리를 수행하는 trans_data.ipynb 파일의 과정은 시각적으로 진행사항을 보여주지 않는다.

<br>

### trans_data.ipynb

trans_data_preview.ipynb 파일에서 10단계의 과정을 통해 음성 데이터를 전처리 및 저장하였다.

trans_data_preview.ipynb 에서 진행한 10단계의 과정을 시각화 없이 모든 origin_data(원본 데이터셋)에 대해 수행한다.

전처리된 음성파일들은 'data' 폴더에 저장된다.

<br>

### create_state_folder.py

원천 데이터를 처리하여 가용한 데이터로 변환한다. 처리 내용은 아래와 같다.

1. 분석할 수 없는 파일을 제거한다.

2. sampling rate를 통일한다.

3. state 별 파일을 폴더 이름을 통해 구분한다. 이때 상위 7개의 state에 대해서만 구분하며 나머지는 etc 파일에 csv와 함께 저장한다.

위 코드를 수행한 다음 data 폴더를 삭제하고 temp 폴더의 이름을 'data'로 변경하는 것은 사용자에게 맡긴다. 예기치 못하게 데이터가 삭제되는 것을 미연에 방지하는 것이다.

<br>

### bit_sampling.py

음성의 sampling rate를 통일하는 resampling 함수와 파일 리스트가 모두 동일한 sampling rate를 가지는지 확인하는 is_same_sample_rate 함수를 제공한다.

<br>

### rename_by_state.py

state 이름을 통해 파일명을 hungry_1.wav, hungry_2.wav와 같이 변경한다.

<br>

### get_sample_data.py

라벨에 따라 균등하게 맞추어 n개의 샘플을 추출한다.

<br>

### split_audio.py

오디오를 지정된 시간으로 분할한다.

<br>

### get_state_list.py

폴더의 이름으로부터 state 이름을 가져온다.

<br>

### trim_white_noise.py

오디오의 앞뒤에 존재하는 화이트 노이즈를 제거한다.
화이트 노이즈는 음성의 전체 에너지의 하위 10%에 해당하는 시점으로 정의한다.

<br>

### reduce_white_noise.py

noisereduce 라이브러리를 통해 디노이징 작업을 수행한다.
